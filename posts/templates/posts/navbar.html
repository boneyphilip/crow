{% load static %}
<link
  href="https://fonts.googleapis.com/icon?family=Material+Icons+Round"
  rel="stylesheet"
/>
<link rel="stylesheet" href="{% static 'posts/css/navbar.css' %}" />

<nav class="navbar">
  <!-- LEFT — Logo -->
  <div class="nav-left">
    <a href="/" class="nav-logo">
      <span class="material-icons-round logo-icon">filter_drama</span>
      <span class="logo-text">Crow</span>
    </a>
  </div>

  <!-- CENTER — Search -->
  <div class="nav-center">
    <div class="search-box">
      <span class="material-icons-round search-icon">search</span>
      <input
        type="text"
        id="searchBar"
        placeholder="Search posts or users..."
        autocomplete="off"
      />
      <div id="searchResults" class="search-results"></div>
    </div>
  </div>

  <!-- RIGHT — Icons -->
  <div class="nav-right">
    <!-- HOME ICON -->
    <a href="/" class="nav-icon">
      <span class="material-icons-round">home</span>
    </a>

    <!-- CREATE POST ICON -->
    {% if user.is_authenticated %}
    <a href="/create/" class="nav-icon">
      <span class="material-icons-round">add_box</span>
    </a>
    {% else %}
    <a href="/login/" class="nav-icon">
      <span class="material-icons-round">add_box</span>
    </a>
    {% endif %}

    <!-- PROFILE AVATAR + DROPDOWN -->
    <div class="profile-wrapper">
      <button class="nav-profile-btn">
        <img
          class="nav-avatar"
          src="https://ui-avatars.com/api/?name={{ user.username|default:'Guest' }}&background=111111&color=ffffff&size=64"
        />
      </button>

      <div class="profile-menu">
        {% if user.is_authenticated %}
        <a href="/profile/{{ user.username }}/" class="pm-item">Profile</a>
        <form method="post" action="{% url 'logout' %}" class="logout-form">
          {% csrf_token %}
          <button type="submit" class="pm-item logout-link">Logout</button>
        </form>

        {% else %}
        <a href="/login/" class="pm-item">Sign In</a>
        <a href="/register/" class="pm-item">Create Account</a>
        {% endif %}
      </div>
    </div>
  </div>
</nav>

<script src="{% static 'posts/js/navbar.js' %}"></script>
