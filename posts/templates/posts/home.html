{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crow â€“ Community Feed</title>

    <!-- Bootstrap CSS (for responsive design and styles) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* Custom style to make layout closer to Reddit look */
        body {
            background-color: #f6f7f8; /* soft gray background */
            font-family: "Inter", "Segoe UI", Arial, sans-serif;
        }

        h1 {
            font-weight: 700;
            color: #212529;
        }

        .card {
            border-radius: 12px; /* smooth rounded corners */
            border: 1px solid #e0e0e0;
        }

        .btn-outline-success {
            border-radius: 20px; /* rounded button */
            font-weight: 500;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .card-subtitle {
            font-size: 0.9rem;
        }

        .upvote-section {
            display: flex;
            align-items: center;
            gap: 6px;
        }
    </style>
</head>

<body class="bg-light">

<!-- Outer container with padding -->
<div class="container py-5">

    <!-- Page Title -->
    <h1 class="text-center mb-5">
        Crow ðŸª¶ Community Feed
    </h1>

    <!-- ========================== -->
    <!-- CREATE POST FORM SECTION -->
    <!-- ========================== -->
    <div class="card shadow-sm mb-5">
        <div class="card-body">
            <h4 class="card-title mb-3">Create a Post</h4>

            <form method="POST" class="mb-4">
                {% csrf_token %}
                <!-- Django auto-generated form -->
                {{ form.as_p }}

                <!-- Submit button -->
                <button type="submit" class="btn btn-primary">Share Post</button>
            </form>
        </div>
    </div>

    <!-- ========================== -->
    <!-- POSTS LIST SECTION -->
    <!-- ========================== -->
    <h3 class="fw-semibold mb-4">Latest Posts</h3>

    {% for post in posts %}
        <div class="card mb-4 shadow-sm">
            <div class="card-body">

                <!-- Post Title -->
                <h5 class="card-title mb-1">{{ post.title }}</h5>

                <!-- Author and Time -->
                <h6 class="card-subtitle mb-3 text-muted">
                    by {{ post.author.username }} â€¢ {{ post.created_at|date:"M d, Y H:i" }}
                </h6>

                <!-- Post Content -->
                <p class="card-text">{{ post.content }}</p>

                <!-- Upvote Button -->
                <form action="{% url 'upvote_post' post.id %}" method="post" class="upvote-section">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline-success btn-sm">
                        ðŸ”¥ Upvote
                    </button>
                    <span class="text-secondary">{{ post.upvotes }} upvotes</span>
                </form>

            </div>
        </div>
    {% empty %}
        <p class="text-muted">No posts yet. Be the first to share something!</p>
    {% endfor %}
</div>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
